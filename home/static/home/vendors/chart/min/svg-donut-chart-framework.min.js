var programmingSkills=[{value:35,label:"Macintosh",color:"#69d53f"},{value:25,label:"Windows",color:"#f25656"},{value:15,label:"Android",color:"#3599ea"},{value:25,label:"iPhone",color:"#f1bb47"}];!function(t,e,r,n){"use strict";function i(e,r){this.$el=t(e),this.opts=r,this.snap=n(e),this.startShowAnimation=i.prototype.startShowAnimation,this.init()}i.prototype.init=function(){this.drawLegend(),this.drawBaseCircle()},i.prototype.drawBaseCircle=function(){var t=this.snap,e=this.opts,r=t.path("M10-5-10,15M15,0,0,15M0-5-20,15").attr({fill:"none",stroke:"none",strokeWidth:0}),n=t.circle(e.center.y,e.center.y,e.radius).attr({fill:r});i.prototype.circle=t.circle(e.center.y,e.center.y,e.radius).attr({fill:"r(0.5, 0.5, 0.5)#FFC575-#fff",mask:n,stroke:"#D9D9D9",strokeWidth:0,opacity:0}),t.circle(e.center.y,e.center.y,e.radius).attr({stroke:"#D9D9D9",fill:"none",strokeWidth:0})},i.prototype.drawLegend=function(){for(var t=this.snap,e=this.opts,r=e.data,n=e.center.x+e.radius+50,i=30,a=6,o=e.center.y-r.length/2*i+a/2+(i-a)/2,s=0;s<r.length;s++){var c=r[s];c.legend={baseCircle:t.circle(n,o,a),baseCircleRadius:a,text:t.text(n+i,o+a/2,c.label),center:{x:n,y:o}},c.legend.baseCircle.attr({stroke:"0",fill:"none",strokeWidth:0,color:""}),o+=i}},i.prototype.buildArcPath=function(t,e,r,n){var i=this.translatedPoint(t,e,r),a=this.translatedPoint(t,e,n),o=n-r>180?1:0;return"M"+i.x+","+i.y+" A"+e+","+e+" 0 "+o+",1 "+a.x+","+a.y},i.prototype.animateArcByDegrees=function(t,e,r){var i=this.snap,a=this;n.animate(t.degreesStart,t.degreesEnd,function(e){t.draw&&t.draw.remove(),t.path=a.buildArcPath(t.center,t.radius,t.degreesStart,e),t.draw=i.path(t.path),t.draw.attr({stroke:t.color,fill:"none",strokeWidth:t.strokeWidth,cursor:"pointer"})},e,mina.linear,function(){r&&r()})},i.prototype.animateArcByStroke=function(t,e,r,i,a){var o=this.snap,s=this;n.animate(e,r,function(e){t.draw&&t.draw.remove();var r=t.radius+(e-t.strokeWidth)/6;t.path=s.buildArcPath(t.center,r,t.degreesStart,t.degreesEnd),t.draw=o.path(t.path),t.draw.attr({stroke:t.color,fill:"none",strokeWidth:e,cursor:"pointer"})},i,mina.bounce,function(){a&&a()})},i.prototype.createLegendCircle=function(t){t.draw=this.snap.circle(t.x,t.y,t.radius),t.draw.attr({fill:t.color})},i.prototype.animateShowLegendCircle=function(t,e){t.draw.transform("s0,"+t.x+","+t.y),t.draw.animate({transform:"s1,"+t.x+","+t.y},e,mina.bounce)},i.prototype.startShowAnimationOneEntry=function(t,e,r,n,i,a){t.arc={percentStart:e,percentEnd:r,degreesStart:parseFloat(e)/100*360,degreesEnd:parseFloat(r)/100*360,color:t.color,strokeWidth:40,center:n,radius:i},this.animateArcByDegrees(t.arc,900,a),t.legend.circle={color:t.color,x:t.legend.center.x,y:t.legend.center.y,radius:t.legend.baseCircleRadius+2},this.createLegendCircle(t.legend.circle),this.animateShowLegendCircle(t.legend.circle,400)},i.prototype.translatedPoint=function(t,e,r){var n=Math.PI*(r-270)/180;return{x:t.x+e*Math.cos(n),y:t.y+e*Math.sin(n)}},i.prototype.hightlightElement=function(t){{var e=(this.snap,this.opts);e.data}if(this.previousHighlightElement!=t){this.previousHighlightElement&&this.normalElement(this.previousHighlightElement),this.previousHighlightElement=t;var r=t.legend.circle;r.draw.animate({transform:"s1.3,"+r.x+","+r.y},200,mina.bounce),this.animateArcByStroke(t.arc,t.arc.strokeWidth,t.arc.strokeWidth+15,500)}},i.prototype.normalElement=function(t){var e=(this.snap,this.opts),r=this,n=(e.data,t.legend.circle);n.draw.animate({transform:"s1,"+n.x+","+n.y},500,mina.bounce),this.animateArcByStroke(t.arc,t.arc.strokeWidth+6,t.arc.strokeWidth,500,function(){t.arc.draw.mouseover(function(){r.hightlightElement(t)}),t.arc.draw.click(function(){r.hightlightElement(t)})})},i.prototype.initInteraction=function(t,e){var r=this.snap,n=this,i=t.legend,a=t.arc;i.button=r.rect(i.center.x-2*i.baseCircleRadius,i.center.y-e/2,200,e),i.button.attr({opacity:0,cursor:"pointer",color:"red"}),i.button.mouseover(function(){n.hightlightElement(t)}),i.button.click(function(){n.hightlightElement(t)}),a.draw.mouseover(function(){n.hightlightElement(t)}),a.draw.click(function(){n.hightlightElement(t)})},i.prototype.initInteractions=function(){for(var t=(this.snap,this.opts),e=t.data,r=0;r<e.length;r++)this.initInteraction(e[r],30)},i.prototype.startShowAnimation=function(t,e,r){t&&!e&&(r=t,t=e);var a=(this.snap,this.opts),o=this,s=a.data,c=0,l=0;if(t)c=t,l=e;else{for(var h=0;h<s.length;h++){var d=s[h];d.arc&&d.arc.draw&&d.arc.draw.remove(),d.legend&&d.legend.circle&&d.legend.circle.draw&&d.legend.circle.draw.remove()}n.animate(0,.5,function(t){i.prototype.circle.attr({opacity:t})},800)}if(s.length>c){var d=s[c];this.startShowAnimationOneEntry(d,l,l+d.value,a.center,a.radius,function(){o.startShowAnimation(c+1,l+d.value,r)})}else this.initInteractions(),r&&r()},t.fn.donut=function(t){var e=[];return this.each(function(){e.push(new i(this,t))}),1==e.length?e[0]:e}}(jQuery,document,window,Snap);var donutSize=300,donut=$("#svg").donut({donutSize:donutSize,center:{x:donutSize/2,y:donutSize/2},radius:.3*donutSize/1,data:programmingSkills});donut.startShowAnimation(function(){$("button").attr("disabled",!1)});